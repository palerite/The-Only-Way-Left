[gd_scene load_steps=18 format=3 uid="uid://df60tn3yr0nvl"]

[ext_resource type="Script" uid="uid://57t7plhsoy5v" path="res://game.gd" id="1_e2o6t"]
[ext_resource type="PackedScene" uid="uid://ct8517n1ncw74" path="res://player/player.tscn" id="3_feb5d"]
[ext_resource type="Texture2D" uid="uid://d5i7qb37x1h0" path="res://vfx/background_particle.png" id="4_fc0e3"]
[ext_resource type="Script" uid="uid://1ripjstp24eh" path="res://levels/level_manager.gd" id="4_ryrav"]
[ext_resource type="Texture2D" uid="uid://is0uddudpegk" path="res://vfx/transition.png" id="5_7jktm"]

[sub_resource type="AtlasTexture" id="AtlasTexture_7jktm"]
atlas = ExtResource("4_fc0e3")
region = Rect2(0, 2, 32, 2)

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_7jktm"]
particle_flag_disable_z = true
emission_shape_offset = Vector3(-160, 0, 0)
emission_shape = 3
emission_box_extents = Vector3(1, 140, 1)
spread = 0.0
initial_velocity_min = 327.58
initial_velocity_max = 454.02
gravity = Vector3(0, 0, 0)
color = Color(1, 1, 1, 0.305882)

[sub_resource type="AtlasTexture" id="AtlasTexture_ryrav"]
atlas = ExtResource("4_fc0e3")
region = Rect2(0, 0, 80, 2)

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_fc0e3"]
particle_flag_disable_z = true
emission_shape_offset = Vector3(160, 0, 0)
emission_shape = 3
emission_box_extents = Vector3(1, 140, 1)
direction = Vector3(-1, 0, 0)
spread = 0.0
initial_velocity_min = 683.9
initial_velocity_max = 810.34
gravity = Vector3(0, 0, 0)
color = Color(1, 1, 1, 0.305882)

[sub_resource type="Animation" id="Animation_7jktm"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(0.4, 0.4, 0.4, 1)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("../../CanvasModulate:color")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}

[sub_resource type="Animation" id="Animation_fc0e3"]
resource_name = "switch_phase2"
length = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, -2),
"update": 0,
"values": [Color(0.74902, 0.580392, 0.415686, 1), Color(0.309804, 0.219608, 0.4, 1)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("../../CanvasModulate:color")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(0.629675, 0.629675, 0.629675, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_ryrav"]
_data = {
&"RESET": SubResource("Animation_7jktm"),
&"switch_phase2": SubResource("Animation_fc0e3")
}

[sub_resource type="Animation" id="Animation_eow3j"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(-769, 0)]
}

[sub_resource type="Animation" id="Animation_ryrav"]
resource_name = "slide_in"
length = 0.5
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(2, 1),
"update": 0,
"values": [Vector2(-769, 0), Vector2(-191, 0)]
}

[sub_resource type="Animation" id="Animation_j5wjh"]
resource_name = "slide_out"
length = 0.5
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 2),
"update": 0,
"values": [Vector2(-191, 0), Vector2(393, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_vef74"]
_data = {
&"RESET": SubResource("Animation_eow3j"),
&"slide_in": SubResource("Animation_ryrav"),
&"slide_out": SubResource("Animation_j5wjh")
}

[sub_resource type="Environment" id="Environment_feb5d"]
background_mode = 3
glow_enabled = true
glow_levels/1 = 0.16
glow_levels/3 = 0.0
glow_levels/4 = 0.81
glow_levels/6 = 0.45
glow_levels/7 = 0.4
glow_intensity = 1.27
glow_strength = 0.48
glow_bloom = 0.3
glow_blend_mode = 0
adjustment_enabled = true
adjustment_contrast = 1.08

[node name="Game" type="Node" node_paths=PackedStringArray("background_ap", "particles_right", "particles_left", "canvas_modulate", "transition_ap") groups=["Game"]]
script = ExtResource("1_e2o6t")
background_ap = NodePath("BgLayer/ColorBackground/AnimationPlayer")
particles_right = NodePath("BgLayer/ColorBackground/ParticlesRight")
particles_left = NodePath("BgLayer/ColorBackground/ParticlesLeft")
canvas_modulate = NodePath("CanvasModulate")
MODULATE_COLOR = Color(0.699653, 0.699653, 0.699653, 1)
transition_ap = NodePath("GuiLayer/Transition/AnimationPlayer")

[node name="CanvasModulate" type="CanvasModulate" parent="."]

[node name="BgLayer" type="CanvasLayer" parent="."]
layer = -1

[node name="ColorBackground" type="ColorRect" parent="BgLayer"]
light_mask = 2
z_index = -20
offset_left = -5.0
offset_top = -5.0
offset_right = 394.0
offset_bottom = 224.0
color = Color(0.4, 0.4, 0.4, 1)

[node name="ParticlesRight" type="GPUParticles2D" parent="BgLayer/ColorBackground"]
position = Vector2(57, 115)
amount = 25
texture = SubResource("AtlasTexture_7jktm")
lifetime = 1.4
preprocess = 1.0
speed_scale = 0.6
process_material = SubResource("ParticleProcessMaterial_7jktm")

[node name="ParticlesLeft" type="GPUParticles2D" parent="BgLayer/ColorBackground"]
visible = false
position = Vector2(364, 116)
amount = 20
texture = SubResource("AtlasTexture_ryrav")
lifetime = 0.8
preprocess = 1.0
process_material = SubResource("ParticleProcessMaterial_fc0e3")

[node name="AnimationPlayer" type="AnimationPlayer" parent="BgLayer/ColorBackground"]
libraries = {
&"": SubResource("AnimationLibrary_ryrav")
}

[node name="GuiLayer" type="CanvasLayer" parent="."]

[node name="Transition" type="TextureRect" parent="GuiLayer"]
offset_left = -769.0
offset_right = -1.0
offset_bottom = 216.0
texture = ExtResource("5_7jktm")

[node name="AnimationPlayer" type="AnimationPlayer" parent="GuiLayer/Transition"]
libraries = {
&"": SubResource("AnimationLibrary_vef74")
}

[node name="LevelManager" type="Node" parent="." node_paths=PackedStringArray("camera", "player")]
script = ExtResource("4_ryrav")
camera = NodePath("Camera2D")
player = NodePath("../Player")

[node name="Camera2D" type="Camera2D" parent="LevelManager"]
offset = Vector2(192, 108)

[node name="Player" parent="." instance=ExtResource("3_feb5d")]
position = Vector2(310, 150)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_feb5d")
